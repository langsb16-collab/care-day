<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CASHiQ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <nav class="bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <span class="text-2xl">ğŸ§ </span>
                    <div>
                        <h1 class="text-xl font-bold">CASHiQ ê´€ë¦¬ì</h1>
                        <p class="text-sm opacity-90">Admin Dashboard</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="hidden md:inline text-sm"><i class="fas fa-user-shield mr-1"></i><span id="adminName"></span></span>
                    <button onclick="logout()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-sign-out-alt mr-1"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <!-- Welcome Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">í™˜ì˜í•©ë‹ˆë‹¤, <span id="welcomeName"></span>ë‹˜</h2>
            <p class="text-gray-600">CASHiQ í”Œë«í¼ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.</p>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-600 text-sm mb-1">ê³µì§€ì‚¬í•­</p>
                        <p class="text-2xl font-bold text-gray-800" id="noticeCount">0/50</p>
                        <p class="text-xs text-gray-500 mt-1">ìµœëŒ€ 50ê°œ</p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-lg">
                        <i class="fas fa-bullhorn text-blue-600 text-2xl"></i>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-600 text-sm mb-1">íŒì—…</p>
                        <p class="text-2xl font-bold text-gray-800" id="popupCount">0/3</p>
                        <p class="text-xs text-gray-500 mt-1">ìµœëŒ€ 3ê°œ</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-lg">
                        <i class="fas fa-window-restore text-green-600 text-2xl"></i>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-600 text-sm mb-1">ë°°ë„ˆê´‘ê³ </p>
                        <p class="text-2xl font-bold text-gray-800" id="bannerCount">0/30</p>
                        <p class="text-xs text-gray-500 mt-1">ìµœëŒ€ 30ê°œ</p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-lg">
                        <i class="fas fa-ad text-purple-600 text-2xl"></i>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-600 text-sm mb-1">íšŒì›</p>
                        <p class="text-3xl font-bold text-gray-800" id="memberCount">0</p>
                    </div>
                    <div class="bg-orange-100 p-3 rounded-lg">
                        <i class="fas fa-users text-orange-600 text-2xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <a href="notices.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-blue-100 p-4 rounded-lg">
                        <i class="fas fa-bullhorn text-blue-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">ê³µì§€ ê´€ë¦¬</h3>
                        <p class="text-gray-600 text-sm">ê³µì§€ì‚¬í•­ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ</p>
                    </div>
                </div>
            </a>

            <a href="popups.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-green-100 p-4 rounded-lg">
                        <i class="fas fa-window-restore text-green-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">íŒì—… ê´€ë¦¬</h3>
                        <p class="text-gray-600 text-sm">íŒì—… ë“±ë¡/ìˆ˜ì •/ì‚­ì œ</p>
                    </div>
                </div>
            </a>

            <a href="banners.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-purple-100 p-4 rounded-lg">
                        <i class="fas fa-ad text-purple-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">ë°°ë„ˆê´‘ê³  ê´€ë¦¬</h3>
                        <p class="text-gray-600 text-sm">ë°°ë„ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ</p>
                    </div>
                </div>
            </a>

            <a href="members.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-orange-100 p-4 rounded-lg">
                        <i class="fas fa-users text-orange-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">íšŒì› ê´€ë¦¬</h3>
                        <p class="text-gray-600 text-sm">íšŒì› ì •ë³´ ì¡°íšŒ/ê´€ë¦¬</p>
                    </div>
                </div>
            </a>

            <a href="inquiries.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-yellow-100 p-4 rounded-lg">
                        <i class="fas fa-comments text-yellow-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">1ëŒ€1 ë¬¸ì˜ ê´€ë¦¬</h3>
                        <p class="text-gray-600 text-sm">ìœ ë£ŒíšŒì› ë¬¸ì˜ ë‹µë³€</p>
                    </div>
                </div>
            </a>

            <a href="../index.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <i class="fas fa-home text-gray-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">ë©”ì¸ ì‚¬ì´íŠ¸</h3>
                        <p class="text-gray-600 text-sm">ì‚¬ìš©ì í˜ì´ì§€ ë³´ê¸°</p>
                    </div>
                </div>
            </a>

            <a href="settings.html" class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition transform hover:-translate-y-1">
                <div class="flex items-center space-x-4">
                    <div class="bg-red-100 p-4 rounded-lg">
                        <i class="fas fa-cog text-red-600 text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">ì„¤ì •</h3>
                        <p class="text-gray-600 text-sm">ì‹œìŠ¤í…œ ì„¤ì • ê´€ë¦¬</p>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <script>
        // Check authentication
        function checkAuth() {
            const loggedIn = sessionStorage.getItem('adminLoggedIn');
            if (!loggedIn) {
                window.location.href = 'index.html';
                return false;
            }
            return true;
        }

        function logout() {
            sessionStorage.clear();
            window.location.href = 'index.html';
        }

        async function loadStats() {
            try {
                // Load notices count from localStorage (priority) or JSON
                let notices = [];
                const savedNotices = localStorage.getItem('notices');
                if (savedNotices) {
                    notices = JSON.parse(savedNotices);
                } else {
                    try {
                        const noticesRes = await fetch('../data/notices.json');
                        notices = await noticesRes.json();
                    } catch (e) {
                        console.log('No notices.json file');
                    }
                }
                document.getElementById('noticeCount').textContent = `${notices.length}/50`;

                // Load popups count from localStorage (priority) or JSON
                let popups = [];
                const savedPopups = localStorage.getItem('popups');
                if (savedPopups) {
                    popups = JSON.parse(savedPopups);
                } else {
                    try {
                        const popupsRes = await fetch('../data/popups.json');
                        popups = await popupsRes.json();
                    } catch (e) {
                        console.log('No popups.json file');
                    }
                }
                document.getElementById('popupCount').textContent = `${popups.length}/3`;

                // Load banners count from localStorage (priority) or JSON
                let banners = [];
                const savedBanners = localStorage.getItem('banners');
                if (savedBanners) {
                    banners = JSON.parse(savedBanners);
                } else {
                    try {
                        const bannersRes = await fetch('../data/banners.json');
                        banners = await bannersRes.json();
                    } catch (e) {
                        console.log('No banners.json file');
                    }
                }
                document.getElementById('bannerCount').textContent = `${banners.length}/30`;

                // Load members count
                const membersRes = await fetch('../data/members.json');
                const members = await membersRes.json();
                document.getElementById('memberCount').textContent = members.length;
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Initialize
        if (checkAuth()) {
            const username = sessionStorage.getItem('adminUsername') || 'Admin';
            document.getElementById('adminName').textContent = username;
            document.getElementById('welcomeName').textContent = username;
            loadStats();
        }
    </script>
        <!-- CASHiQ Storage Manager -->
    <script src="/js/storage-manager.js"></script>

    <!-- CASHiQ Chatbot -->
    <script src="/js/chatbot.js"></script>
</body>
</html>
