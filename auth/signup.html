<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="signup.pageTitle">íšŒì›ê°€ì… - CASHiQ ë‡Œì§ˆí™˜ì¼€ì–´</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§ </text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ì–¸ì–´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê°œì„  */
        .lang-btn {
            position: relative;
            transition: all 0.3s ease;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .lang-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .lang-btn:active {
            transform: scale(0.95);
        }
        
        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 640px) {
            .lang-btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.875rem;
            }
        }
        
        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="font-sans bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen flex items-center justify-center p-4">
    
    <div class="w-full max-w-3xl">
        <!-- Back Button & Language Switcher -->
        <div class="mb-6 flex items-center justify-between flex-wrap gap-3">
            <a href="../index.html" class="inline-flex items-center text-primary hover:text-blue-700 font-medium">
                <i class="fas fa-arrow-left mr-2"></i><span data-i18n="signup.backToHome">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
            </a>
            
            <!-- Language Switcher -->
            <div class="flex items-center space-x-1" id="languageSwitcher">
                <button onclick="switchLanguage('ko')" class="lang-btn px-3 py-2 rounded-lg bg-white hover:bg-gray-100 transition text-sm font-medium" data-lang="ko">
                    ğŸ‡°ğŸ‡· <span class="hidden sm:inline">í•œêµ­ì–´</span>
                </button>
                <button onclick="switchLanguage('en')" class="lang-btn px-3 py-2 rounded-lg bg-white hover:bg-gray-100 transition text-sm font-medium" data-lang="en">
                    ğŸ‡ºğŸ‡¸ <span class="hidden sm:inline">English</span>
                </button>
                <button onclick="switchLanguage('zh')" class="lang-btn px-3 py-2 rounded-lg bg-white hover:bg-gray-100 transition text-sm font-medium" data-lang="zh">
                    ğŸ‡¨ğŸ‡³ <span class="hidden sm:inline">ä¸­æ–‡</span>
                </button>
                <button onclick="switchLanguage('ja')" class="lang-btn px-3 py-2 rounded-lg bg-white hover:bg-gray-100 transition text-sm font-medium" data-lang="ja">
                    ğŸ‡¯ğŸ‡µ <span class="hidden sm:inline">æ—¥æœ¬èª</span>
                </button>
            </div>
        </div>

        <!-- Main Container -->
        <div class="bg-white rounded-xl shadow-2xl overflow-hidden fade-in">
            <div class="grid md:grid-cols-2 gap-0 text-sm">
                <!-- Left Side - Membership Plans -->
                <div class="bg-gradient-to-br from-blue-600 to-purple-600 p-5 md:p-8 text-white">
                    <h2 class="text-2xl font-bold mb-4" data-i18n="signup.membershipTitle">íšŒì› ë“±ê¸‰ ì„ íƒ</h2>
                    
                    <!-- Free Plan -->
                    <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-lg p-4 mb-4 hover:bg-opacity-20 transition cursor-pointer border-2 border-transparent hover:border-white" onclick="selectPlan('free')">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h3 class="text-xl font-bold" data-i18n="signup.free.title">ë¬´ë£Œ íšŒì›</h3>
                                <p class="text-blue-100 text-xs mt-1" data-i18n="signup.free.subtitle">Free Membership</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold" data-i18n="signup.free.price">â‚©0</div>
                                <div class="text-xs text-blue-100" data-i18n="signup.free.duration">ì˜êµ¬ ë¬´ë£Œ</div>
                            </div>
                        </div>
                        <div class="space-y-1.5 text-xs">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle mr-2 text-green-300"></i>
                                <span data-i18n="signup.free.feature1">í•˜ë£¨ ë³‘ì› ê²€ìƒ‰ 3íšŒ</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check-circle mr-2 text-green-300"></i>
                                <span data-i18n="signup.free.feature2">ê³µì§€ì‚¬í•­ ì—´ëŒ</span>
                            </div>
                        </div>
                        <button type="button" class="w-full mt-3 bg-white text-blue-600 py-1.5 rounded-lg font-semibold text-sm hover:bg-blue-50 transition" data-i18n="signup.free.button">
                            ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>

                    <!-- Paid Plans -->
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-6 hover:shadow-2xl transition cursor-pointer border-2 border-transparent hover:border-yellow-300" onclick="selectPlan('1year')">
                            <div class="flex items-start justify-between mb-3">
                                <div>
                                    <h3 class="text-xl font-bold text-white" data-i18n="signup.premium1Year.title">í”„ë¦¬ë¯¸ì—„ 1ë…„</h3>
                                    <p class="text-orange-100 text-sm mt-1" data-i18n="signup.premium1Year.subtitle">Premium 1 Year</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold text-white" data-i18n="signup.premium1Year.price">â‚©68,000</div>
                                    <div class="text-xs text-orange-100" data-i18n="signup.premium1Year.duration">ì•½ â‚©5,666/ì›”</div>
                                </div>
                            </div>
                            <div class="space-y-1.5 text-xs text-white">
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature1">í”Œë«í¼ ëª¨ë“  ë©”ë‰´ ì‚¬ìš©</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature2">ëª¨ë“  í•˜ìœ„ ë©”ë‰´ ì ‘ê·¼</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature3">ë¬´ì œí•œ ë³‘ì› ê²€ìƒ‰</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature4">ì»¤ë®¤ë‹ˆí‹° ì „ì²´ ì´ìš©</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature5">ë³‘ì› ë¦¬ë·° & í‰ê°€</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature6">í•„í„°ë§ & ì§€ë„ ê²€ìƒ‰</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature7">ì œíœ´ ë³‘ì› í• ì¸</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-crown mr-2 text-yellow-200"></i>
                                    <span data-i18n="signup.premium1Year.feature8">ìš°ì„  ê³ ê° ì§€ì›</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl p-6 hover:shadow-2xl transition cursor-pointer border-2 border-transparent hover:border-purple-300" onclick="selectPlan('2year')">
                            <div class="flex items-start justify-between mb-3">
                                <div>
                                    <h3 class="text-lg font-bold text-white" data-i18n="signup.premium2Year.title">í”„ë¦¬ë¯¸ì—„ 2ë…„</h3>
                                    <p class="text-purple-100 text-xs mt-1" data-i18n="signup.premium2Year.subtitle">Premium 2 Years</p>
                                    <span class="inline-block bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full mt-1" data-i18n="signup.premium2Year.badge">32% í• ì¸!</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-xl font-bold text-white" data-i18n="signup.premium2Year.price">â‚©100,000</div>
                                    <div class="text-xs text-purple-100" data-i18n="signup.premium2Year.duration">ì•½ â‚©4,166/ì›”</div>
                                </div>
                            </div>
                            <div class="space-y-1.5 text-xs text-white">
                                <div class="flex items-center">
                                    <i class="fas fa-star mr-2 text-yellow-300"></i>
                                    <span data-i18n="signup.premium2Year.feature1">1ë…„ í”Œëœì˜ ëª¨ë“  í˜œíƒ</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-star mr-2 text-yellow-300"></i>
                                    <span data-i18n="signup.premium2Year.feature2">í”Œë«í¼ ëª¨ë“  ê¸°ëŠ¥ ì‚¬ìš©</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-star mr-2 text-yellow-300"></i>
                                    <span data-i18n="signup.premium2Year.feature3">â‚©36,000 ì¶”ê°€ ì ˆì•½</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-star mr-2 text-yellow-300"></i>
                                    <span data-i18n="signup.premium2Year.feature4">í”„ë¦¬ë¯¸ì—„ ê°„ë³‘ ê°€ì´ë“œ</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-star mr-2 text-yellow-300"></i>
                                    <span data-i18n="signup.premium2Year.feature5">VIP ì „ìš© í˜œíƒ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Side - Signup Form -->
                <div class="p-5 md:p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2" data-i18n="signup.signupTitle">íšŒì›ê°€ì…</h2>
                    <p class="text-gray-600 mb-4 text-sm" data-i18n="signup.signupSubtitle">CASHiQì™€ í•¨ê»˜ ê±´ê°•í•œ ì¼€ì–´ë¥¼ ì‹œì‘í•˜ì„¸ìš”</p>

                    <form id="signupForm" class="space-y-3">
                        <input type="hidden" id="membershipPlan" value="free">

                        <!-- Name -->
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1.5">
                                <span data-i18n="signup.form.nameLabel">ì´ë¦„</span> <span class="text-red-500" data-i18n="signup.form.required">*</span>
                            </label>
                            <input type="text" id="name" required class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition" data-i18n-placeholder="signup.form.namePlaceholder" placeholder="í™ê¸¸ë™">
                        </div>

                        <!-- Email -->
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1.5">
                                <span data-i18n="signup.form.emailLabel">ì´ë©”ì¼</span> <span class="text-red-500" data-i18n="signup.form.required">*</span>
                            </label>
                            <input type="email" id="email" required class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition" data-i18n-placeholder="signup.form.emailPlaceholder" placeholder="email@example.com">
                        </div>

                        <!-- Phone -->
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1.5">
                                <span data-i18n="signup.form.phoneLabel">ì „í™”ë²ˆí˜¸</span> <span class="text-red-500" data-i18n="signup.form.required">*</span>
                            </label>
                            <input type="tel" id="phone" required class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition" data-i18n-placeholder="signup.form.phonePlaceholder" placeholder="010-1234-5678">
                        </div>

                        <!-- Password -->
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1.5">
                                <span data-i18n="signup.form.passwordLabel">ë¹„ë°€ë²ˆí˜¸</span> <span class="text-red-500" data-i18n="signup.form.required">*</span>
                            </label>
                            <input type="password" id="password" required class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition" data-i18n-placeholder="signup.form.passwordPlaceholder" placeholder="8ì ì´ìƒ">
                        </div>

                        <!-- Password Confirm -->
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1.5">
                                <span data-i18n="signup.form.passwordConfirmLabel">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</span> <span class="text-red-500" data-i18n="signup.form.required">*</span>
                            </label>
                            <input type="password" id="passwordConfirm" required class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition" data-i18n-placeholder="signup.form.passwordConfirmPlaceholder" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥">
                        </div>

                        <!-- Terms -->
                        <div class="space-y-1.5">
                            <label class="flex items-start">
                                <input type="checkbox" id="termsAgree" required class="mt-0.5 w-3.5 h-3.5 text-primary rounded focus:ring-primary">
                                <span class="ml-2 text-xs text-gray-600" data-i18n="signup.form.termsLabel">
                                    <a href="#" class="text-primary hover:underline">ì´ìš©ì•½ê´€</a> ë° 
                                    <a href="#" class="text-primary hover:underline">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>ì— ë™ì˜í•©ë‹ˆë‹¤ <span class="text-red-500">*</span>
                                </span>
                            </label>
                            <label class="flex items-start">
                                <input type="checkbox" id="marketingAgree" class="mt-0.5 w-3.5 h-3.5 text-primary rounded focus:ring-primary">
                                <span class="ml-2 text-xs text-gray-600" data-i18n="signup.form.marketingLabel">
                                    ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤ (ì„ íƒ)
                                </span>
                            </label>
                        </div>

                        <!-- Selected Plan Display -->
                        <div id="selectedPlanDisplay" class="bg-blue-50 border-l-4 border-primary p-3 rounded">
                            <p class="text-xs font-medium text-gray-700"><span data-i18n="signup.form.selectedPlan">ì„ íƒí•œ í”Œëœ:</span> <span id="planName" class="text-primary" data-i18n="signup.free.title">ë¬´ë£Œ íšŒì›</span></p>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="w-full bg-primary text-white py-2.5 rounded-lg font-semibold text-base hover:bg-blue-700 transition transform hover:scale-105">
                            <i class="fas fa-user-plus mr-2"></i><span data-i18n="signup.form.submitButton">íšŒì›ê°€ì…</span>
                        </button>

                        <!-- Login Link -->
                        <p class="text-center text-xs text-gray-600">
                            <span data-i18n="signup.form.loginText">ì´ë¯¸ íšŒì›ì´ì‹ ê°€ìš”?</span> 
                            <a href="login.html" class="text-primary hover:underline font-medium" data-i18n="signup.form.loginLink">ë¡œê·¸ì¸</a>
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Load i18n.js first for translations -->
    <script src="../js/i18n.js"></script>
    <script>
        // Wait for i18n.js to load and define translations
        let currentLang = localStorage.getItem('currentLanguage') || localStorage.getItem('language') || 'ko';

        // Update page content based on language - using global translations from i18n.js
        function updateLanguage() {
            // Use global translations object from i18n.js
            if (typeof translations === 'undefined') {
                console.error('Translations not loaded from i18n.js');
                return;
            }
            
            const t = translations[currentLang];
            if (!t || !t.signup) {
                console.error('Signup translations not found for language:', currentLang);
                return;
            }
            
            // First, call global updatePageLanguage if available (from i18n.js)
            // This updates all elements with data-i18n attributes
            if (typeof window.updatePageLanguage === 'function') {
                window.updatePageLanguage();
            }
            
            // Then update form-specific elements not covered by data-i18n
            // Update form labels - with null checks
            const labels = document.querySelectorAll('form label');
            if (labels.length >= 5 && t.signup.form) {
                if (labels[0]) labels[0].innerHTML = `<span data-i18n="signup.form.nameLabel">${t.signup.form.nameLabel}</span> <span class="text-red-500" data-i18n="signup.form.required">${t.signup.form.required}</span>`;
                if (labels[1]) labels[1].innerHTML = `<span data-i18n="signup.form.emailLabel">${t.signup.form.emailLabel}</span> <span class="text-red-500" data-i18n="signup.form.required">${t.signup.form.required}</span>`;
                if (labels[2]) labels[2].innerHTML = `<span data-i18n="signup.form.phoneLabel">${t.signup.form.phoneLabel}</span> <span class="text-red-500" data-i18n="signup.form.required">${t.signup.form.required}</span>`;
                if (labels[3]) labels[3].innerHTML = `${t.signup.form.passwordLabel} <span class="text-red-500">${t.signup.form.required}</span>`;
                if (labels[4]) labels[4].innerHTML = `${t.signup.form.passwordConfirmLabel} <span class="text-red-500">${t.signup.form.required}</span>`;
            }
            
            // Update selected plan display - with null check
            const planDisplay = document.querySelector('#selectedPlanDisplay p');
            if (planDisplay && t.signup.form) {
                planDisplay.innerHTML = `${t.signup.form.selectedPlan} <span id="planName" class="text-primary">${t.signup.free.title}</span>`;
            }
            
            // Update submit button - with null check
            const submitBtn = document.querySelector('button[type="submit"]');
            if (submitBtn && t.signup.form) {
                submitBtn.innerHTML = `<i class="fas fa-user-plus mr-2"></i>${t.signup.form.submitButton}`;
            }
            
            // Update login link - with null check
            const loginLink = document.querySelector('p.text-center.text-xs');
            if (loginLink && t.signup.form) {
                loginLink.innerHTML = `${t.signup.form.loginText} <a href="login.html" class="text-primary hover:underline font-medium">${t.signup.form.loginLink}</a>`;
            }
        }

        // í˜„ì¬ ì„ íƒëœ ì–¸ì–´ ë²„íŠ¼ ê°•ì¡°
        function updateActiveLanguageButton() {
            const buttons = document.querySelectorAll('.lang-btn');
            buttons.forEach(btn => {
                const lang = btn.getAttribute('data-lang');
                if (lang === currentLang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        // Listen for language changes
        window.addEventListener('languageChanged', (e) => {
            currentLang = e.detail.lang;
            updateLanguage();
            updateActiveLanguageButton();
            
            // í˜ì´ë“œì¸ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
            const mainContainer = document.querySelector('.bg-white.rounded-xl');
            if (mainContainer) {
                mainContainer.classList.remove('fade-in');
                void mainContainer.offsetWidth; // ë¦¬í”Œë¡œìš° ê°•ì œ
                mainContainer.classList.add('fade-in');
            }
        });

        // Initialize language on load
        document.addEventListener('DOMContentLoaded', function() {
            // Small delay to ensure i18n.js is fully loaded
            setTimeout(() => {
                updateLanguage();
                updateActiveLanguageButton();
            }, 100);
            
            // ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™”: ì–¸ì–´ ë²„íŠ¼ì— í„°ì¹˜ ì´ë²¤íŠ¸ ì¶”ê°€
            const langButtons = document.querySelectorAll('.lang-btn');
            langButtons.forEach(btn => {
                // í„°ì¹˜ìŠ¤íƒ€íŠ¸ ì‹œ ì¦‰ì‹œ ë°˜ì‘
                btn.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                }, { passive: true });
                
                btn.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                }, { passive: true });
            });
        });

        function selectPlan(plan) {
            // Use global translations from i18n.js
            const t = translations[currentLang];
            if (!t || !t.signup) return;
            
            const planNames = {
                'free': t.signup.free.title,
                '1year': `${t.signup.premium1Year.title} (${t.signup.premium1Year.price})`,
                '2year': `${t.signup.premium2Year.title} (${t.signup.premium2Year.price})`
            };

            document.getElementById('membershipPlan').value = plan;
            const planNameEl = document.getElementById('planName');
            if (planNameEl) planNameEl.textContent = planNames[plan];

            // Visual feedback
            document.querySelectorAll('[onclick*="selectPlan"]').forEach(el => {
                el.style.transform = 'scale(1)';
            });
            if (event && event.currentTarget) {
                event.currentTarget.style.transform = 'scale(1.05)';
            }
        }

        document.getElementById('signupForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const password = document.getElementById('password').value;
            const passwordConfirm = document.getElementById('passwordConfirm').value;
            
            // Use global translations from i18n.js
            const t = translations[currentLang];
            if (!t || !t.signup) {
                alert('Translation error');
                return;
            }

            // Error messages - these need to be added to i18n.js
            const errorPasswordMismatch = {
                ko: 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
                en: 'Passwords do not match.',
                zh: 'å¯†ç ä¸åŒ¹é…ã€‚',
                ja: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚'
            };
            
            const errorPasswordLength = {
                ko: 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.',
                en: 'Password must be at least 8 characters.',
                zh: 'å¯†ç å¿…é¡»è‡³å°‘8ä¸ªå­—ç¬¦ã€‚',
                ja: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚'
            };
            
            const errorTerms = {
                ko: 'ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.',
                en: 'Please agree to the terms.',
                zh: 'è¯·åŒæ„æ¡æ¬¾ã€‚',
                ja: 'åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¦ãã ã•ã„ã€‚'
            };
            
            const errorEmailExists = {
                ko: 'ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.',
                en: 'Email already registered.',
                zh: 'é‚®ç®±å·²æ³¨å†Œã€‚',
                ja: 'ã™ã§ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚'
            };
            
            const successSignup = {
                ko: 'íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!',
                en: 'Sign up completed!',
                zh: 'æ³¨å†Œå®Œæˆï¼',
                ja: 'ä¼šå“¡ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼'
            };
            
            const successPayment = {
                ko: 'íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nê²°ì œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.',
                en: 'Sign up completed!\nRedirecting to payment page.',
                zh: 'æ³¨å†Œå®Œæˆï¼\nè·³è½¬åˆ°æ”¯ä»˜é¡µé¢ã€‚',
                ja: 'ä¼šå“¡ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼\næ±ºæ¸ˆãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚'
            };

            if (password !== passwordConfirm) {
                alert(errorPasswordMismatch[currentLang]);
                return;
            }

            if (password.length < 8) {
                alert(errorPasswordLength[currentLang]);
                return;
            }

            if (!document.getElementById('termsAgree').checked) {
                alert(errorTerms[currentLang]);
                return;
            }

            const memberData = {
                id: Date.now(),
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                type: document.getElementById('membershipPlan').value === 'free' ? 'free' : 'paid',
                plan: document.getElementById('membershipPlan').value === 'free' ? 'ë¬´ë£Œ' : 
                      document.getElementById('membershipPlan').value === '1year' ? '1ë…„ í”„ë¦¬ë¯¸ì—„' : '2ë…„ í”„ë¦¬ë¯¸ì—„',
                joinDate: new Date().toISOString().split('T')[0],
                expireDate: document.getElementById('membershipPlan').value === 'free' ? null :
                           document.getElementById('membershipPlan').value === '1year' ? 
                           new Date(Date.now() + 365*24*60*60*1000).toISOString().split('T')[0] :
                           new Date(Date.now() + 730*24*60*60*1000).toISOString().split('T')[0],
                status: 'active',
                searchCount: 0,
                lastLogin: new Date().toISOString(),
                marketingAgree: document.getElementById('marketingAgree').checked
            };

            // Save to localStorage
            let members = JSON.parse(localStorage.getItem('members') || '[]');
            
            // Check if email already exists
            if (members.some(m => m.email === memberData.email)) {
                alert(errorEmailExists[currentLang]);
                return;
            }

            members.push(memberData);
            localStorage.setItem('members', JSON.stringify(members));

            // Save current user session
            sessionStorage.setItem('currentUser', JSON.stringify(memberData));

            // If paid plan, redirect to payment
            if (memberData.type === 'paid') {
                alert(successPayment[currentLang]);
                window.location.href = 'payment.html?plan=' + document.getElementById('membershipPlan').value;
            } else {
                alert(successSignup[currentLang]);
                window.location.href = '../index.html';
            }
        });
    </script>
</body>
</html>
