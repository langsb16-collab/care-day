<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="medicalLens.title">ë©”ë””ì»¬ ë Œì¦ˆ - ë‡Œì§ˆí™˜ì¼€ì–´</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§ </text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .camera-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 16px;
            overflow: hidden;
            background: #000;
        }
        .camera-video {
            width: 100%;
            display: block;
            border-radius: 16px;
        }
        .capture-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .capture-frame {
            width: 80%;
            height: 60%;
            border: 3px dashed #fff;
            border-radius: 12px;
            box-shadow: 0 0 0 9999px rgba(0,0,0,0.5);
        }
        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ff00, transparent);
            animation: scan 2s linear infinite;
        }
        @keyframes scan {
            0%, 100% { top: 20%; }
            50% { top: 80%; }
        }
        .analysis-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 24px;
            color: white;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }
        .info-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 4px;
        }
        .badge-name { background: #e3f2fd; color: #1976d2; }
        .badge-ingredient { background: #f3e5f5; color: #7b1fa2; }
        .badge-efficacy { background: #e8f5e9; color: #388e3c; }
        .badge-warning { background: #fff3e0; color: #f57c00; }
        .badge-contraindication { background: #ffebee; color: #c62828; }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 32px 0;
        }
        .step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        .step::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: #e0e0e0;
            z-index: -1;
        }
        .step:last-child::after {
            display: none;
        }
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .step.active .step-circle {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.2);
        }
        .step.completed .step-circle {
            background: #4caf50;
            color: white;
        }
        
        .medicine-detail {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="font-sans bg-gray-50">
    
    <!-- Navigation -->
    <nav class="bg-white shadow-lg fixed w-full top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-2">
                <div class="flex items-center space-x-2">
                    <span class="text-2xl md:text-3xl">ğŸ§ </span>
                    <div>
                        <h1 class="text-sm md:text-lg font-bold text-primary" data-i18n="site.name">ë‡Œì§ˆí™˜ì¼€ì–´</h1>
                        <p class="text-[10px] md:text-xs text-gray-600" data-i18n="site.subtitle">Brain Disease Care</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2">
                    <button onclick="switchLanguage('ko')" class="lang-btn px-2 py-1 rounded-lg bg-transparent hover:bg-gray-100 active:bg-gray-200 transition" data-lang="ko">
                        ğŸ‡°ğŸ‡· <span class="hidden sm:inline">í•œêµ­ì–´</span>
                    </button>
                    <button onclick="switchLanguage('en')" class="lang-btn px-2 py-1 rounded-lg bg-transparent hover:bg-gray-100 active:bg-gray-200 transition" data-lang="en">
                        ğŸ‡ºğŸ‡¸ <span class="hidden sm:inline">English</span>
                    </button>
                    <button onclick="switchLanguage('zh')" class="lang-btn px-2 py-1 rounded-lg bg-transparent hover:bg-gray-100 active:bg-gray-200 transition" data-lang="zh">
                        ğŸ‡¨ğŸ‡³ <span class="hidden sm:inline">ä¸­æ–‡</span>
                    </button>
                    <button onclick="switchLanguage('ja')" class="lang-btn px-2 py-1 rounded-lg bg-transparent hover:bg-gray-100 active:bg-gray-200 transition" data-lang="ja">
                        ğŸ‡¯ğŸ‡µ <span class="hidden sm:inline">æ—¥æœ¬èª</span>
                    </button>
                    
                    <button id="mobile-menu-toggle" class="md:hidden ml-4 text-gray-600 hover:text-primary">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-1 pb-2 overflow-x-auto">
                <a href="index.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.home">í™ˆ</a>
                <a href="disease-info.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.disease">ë‡Œì§ˆí™˜ ì •ë³´</a>
                <a href="hospital.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.hospital">ë³‘ì› ê²€ìƒ‰</a>
                <a href="caregivers.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.caregivers">ê°„ë³‘ì¸</a>
                <a href="care-diary.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.careDiary">ê°„ë³‘ì¼ê¸°</a>
                <a href="medical-lens.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap bg-primary text-white" data-i18n="menu.medicalLens">ë©”ë””ì»¬ ë Œì¦ˆ</a>
                <a href="rehab.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.rehab">ì¬í™œìš´ë™</a>
                <a href="community.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.community">ì»¤ë®¤ë‹ˆí‹°</a>
                <a href="medical.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.medical">ëª…ì˜ì°¾ê¸°</a>
                <a href="emergency.html" class="menu-link px-3 py-1 text-sm rounded-lg hover:bg-primary hover:text-white transition whitespace-nowrap" data-i18n="menu.emergency">ì‘ê¸‰</a>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="index.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.home">í™ˆ</a>
                <a href="disease-info.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.disease">ë‡Œì§ˆí™˜ ì •ë³´</a>
                <a href="hospital.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.hospital">ë³‘ì› ê²€ìƒ‰</a>
                <a href="caregivers.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.caregivers">ê°„ë³‘ì¸</a>
                <a href="care-diary.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.careDiary">ê°„ë³‘ì¼ê¸°</a>
                <a href="medical-lens.html" class="block px-4 py-2 bg-primary text-white rounded-lg" data-i18n="menu.medicalLens">ë©”ë””ì»¬ ë Œì¦ˆ</a>
                <a href="rehab.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.rehab">ì¬í™œìš´ë™</a>
                <a href="community.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.community">ì»¤ë®¤ë‹ˆí‹°</a>
                <a href="medical.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.medical">ëª…ì˜ì°¾ê¸°</a>
                <a href="emergency.html" class="block px-4 py-2 hover:bg-gray-100 rounded-lg" data-i18n="menu.emergency">ì‘ê¸‰</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-28 pb-16">
        <div class="container mx-auto px-4">
            
            <!-- Header Section -->
            <div class="text-center mb-8">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">
                    <i class="fas fa-camera-retro text-primary mr-3"></i>
                    <span data-i18n="medicalLens.pageTitle">ë©”ë””ì»¬ ë Œì¦ˆ</span>
                </h2>
                <p class="text-gray-600 text-lg" data-i18n="medicalLens.pageSubtitle">
                    ì•½ì œ ë¼ë²¨ì„ ì´¬ì˜í•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤
                </p>
            </div>

            <!-- Progress Steps -->
            <div class="step-indicator">
                <div class="step active" id="step1">
                    <div class="step-circle">1</div>
                    <div class="text-sm font-semibold" data-i18n="medicalLens.step1">ì‚¬ì§„ ì´¬ì˜</div>
                </div>
                <div class="step" id="step2">
                    <div class="step-circle">2</div>
                    <div class="text-sm font-semibold" data-i18n="medicalLens.step2">AI ë¶„ì„</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-circle">3</div>
                    <div class="text-sm font-semibold" data-i18n="medicalLens.step3">ê°„ë³‘ì¼ì§€ ì €ì¥</div>
                </div>
                <div class="step" id="step4">
                    <div class="step-circle">4</div>
                    <div class="text-sm font-semibold" data-i18n="medicalLens.step4">ë³´í˜¸ì ì „ì†¡</div>
                </div>
            </div>

            <!-- Camera Section -->
            <div id="cameraSection" class="bg-white rounded-2xl shadow-xl p-6 mb-8">
                <h3 class="text-2xl font-bold mb-4 text-center" data-i18n="medicalLens.captureTitle">
                    ì•½ì œ ë¼ë²¨ ì´¬ì˜
                </h3>
                
                <div class="camera-container" id="cameraContainer">
                    <video id="cameraVideo" class="camera-video" autoplay playsinline></video>
                    <div class="capture-overlay">
                        <div class="capture-frame">
                            <div class="scan-line" id="scanLine" style="display:none;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-6 space-y-4">
                    <button onclick="startCamera()" id="startCameraBtn" class="btn-primary">
                        <i class="fas fa-camera mr-2"></i>
                        <span data-i18n="medicalLens.startCamera">ì¹´ë©”ë¼ ì‹œì‘</span>
                    </button>
                    
                    <div id="cameraControls" style="display:none;">
                        <button onclick="capturePhoto()" class="btn-primary mr-3">
                            <i class="fas fa-circle text-red-500 mr-2"></i>
                            <span data-i18n="medicalLens.capture">ì´¬ì˜</span>
                        </button>
                        <button onclick="stopCamera()" class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition">
                            <i class="fas fa-stop mr-2"></i>
                            <span data-i18n="medicalLens.stop">ì¤‘ì§€</span>
                        </button>
                    </div>
                    
                    <div class="mt-4">
                        <input type="file" id="fileUpload" accept="image/*" class="hidden" onchange="handleFileUpload(event)">
                        <button onclick="document.getElementById('fileUpload').click()" class="px-6 py-3 bg-white border-2 border-primary text-primary rounded-lg font-semibold hover:bg-primary hover:text-white transition">
                            <i class="fas fa-upload mr-2"></i>
                            <span data-i18n="medicalLens.uploadPhoto">ì‚¬ì§„ ì—…ë¡œë“œ</span>
                        </button>
                    </div>
                </div>
                
                <canvas id="captureCanvas" style="display:none;"></canvas>
            </div>

            <!-- Analysis Section -->
            <div id="analysisSection" class="bg-white rounded-2xl shadow-xl p-6 mb-8" style="display:none;">
                <h3 class="text-2xl font-bold mb-6 text-center">
                    <i class="fas fa-brain text-primary mr-2"></i>
                    <span data-i18n="medicalLens.analysisTitle">AI ë¶„ì„ ê²°ê³¼</span>
                </h3>
                
                <!-- Captured Image Preview -->
                <div class="text-center mb-6">
                    <img id="capturedImage" src="" alt="Captured medication label" class="max-w-md mx-auto rounded-lg shadow-lg">
                </div>
                
                <!-- Analysis Loading -->
                <div id="analysisLoading" class="text-center py-8">
                    <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"></div>
                    <p class="mt-4 text-gray-600 font-semibold" data-i18n="medicalLens.analyzing">ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
                
                <!-- Analysis Results -->
                <div id="analysisResults" style="display:none;">
                    <div class="analysis-card mb-6">
                        <h4 class="text-2xl font-bold mb-4" id="medicineName">ì•½í’ˆëª…</h4>
                        <div class="flex flex-wrap gap-2">
                            <span class="info-badge badge-name">
                                <i class="fas fa-pills"></i>
                                <span id="medicineType">ì£¼ì‚¬ì œ</span>
                            </span>
                            <span class="info-badge badge-ingredient">
                                <i class="fas fa-flask"></i>
                                <span id="medicineIngredient">ì„±ë¶„ëª…</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="medicine-detail">
                        <h5 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-check-circle text-green-500 mr-2"></i>
                            <span data-i18n="medicalLens.efficacy">íš¨ëŠ¥Â·íš¨ê³¼</span>
                        </h5>
                        <p id="medicineEfficacy" class="text-gray-700 leading-relaxed">ì•½í’ˆì˜ íš¨ëŠ¥ê³¼ íš¨ê³¼ì— ëŒ€í•œ ì„¤ëª…</p>
                    </div>
                    
                    <div class="medicine-detail">
                        <h5 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-heartbeat text-blue-500 mr-2"></i>
                            <span data-i18n="medicalLens.reason">íˆ¬ì—¬ ì´ìœ </span>
                        </h5>
                        <p id="medicineReason" class="text-gray-700 leading-relaxed">ì´ í™˜ìì—ê²Œ ì´ ì•½ì„ íˆ¬ì—¬í•˜ëŠ” ì´ìœ </p>
                    </div>
                    
                    <div class="medicine-detail">
                        <h5 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-exclamation-triangle text-orange-500 mr-2"></i>
                            <span data-i18n="medicalLens.sideEffects">ë¶€ì‘ìš©</span>
                        </h5>
                        <p id="medicineSideEffects" class="text-gray-700 leading-relaxed">ê°€ëŠ¥í•œ ë¶€ì‘ìš© ë° ì£¼ì˜ì‚¬í•­</p>
                    </div>
                    
                    <div class="medicine-detail bg-red-50">
                        <h5 class="text-xl font-bold text-red-700 mb-3 flex items-center">
                            <i class="fas fa-ban text-red-600 mr-2"></i>
                            <span data-i18n="medicalLens.contraindications">ê¸ˆê¸°ì‚¬í•­</span>
                        </h5>
                        <p id="medicineContraindications" class="text-red-700 leading-relaxed font-semibold">ì´ ì•½ì„ ì‚¬ìš©í•´ì„œëŠ” ì•ˆ ë˜ëŠ” ê²½ìš°</p>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex gap-3 mt-6">
                        <button onclick="saveToDiary()" class="btn-primary flex-1">
                            <i class="fas fa-save mr-2"></i>
                            <span data-i18n="medicalLens.saveToDiary">ê°„ë³‘ì¼ì§€ ì €ì¥</span>
                        </button>
                        <button onclick="sendToGuardian()" class="px-6 py-3 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                            <i class="fas fa-paper-plane mr-2"></i>
                            <span data-i18n="medicalLens.sendToGuardian">ë³´í˜¸ì ì „ì†¡</span>
                        </button>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button onclick="resetAnalysis()" class="text-primary hover:underline font-semibold">
                            <i class="fas fa-redo mr-2"></i>
                            <span data-i18n="medicalLens.analyzeAnother">ë‹¤ë¥¸ ì•½ ë¶„ì„í•˜ê¸°</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Success Section -->
            <div id="successSection" class="bg-white rounded-2xl shadow-xl p-8 text-center" style="display:none;">
                <div class="text-6xl mb-4">âœ…</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-3" data-i18n="medicalLens.successTitle">ì €ì¥ ì™„ë£Œ!</h3>
                <p class="text-gray-600 mb-6" data-i18n="medicalLens.successMessage">ê°„ë³‘ì¼ì§€ì— ì €ì¥ë˜ê³  ë³´í˜¸ìì—ê²Œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <div class="flex gap-3 justify-center">
                    <button onclick="viewDiary()" class="px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:opacity-90 transition">
                        <i class="fas fa-book mr-2"></i>
                        <span data-i18n="medicalLens.viewDiary">ê°„ë³‘ì¼ì§€ ë³´ê¸°</span>
                    </button>
                    <button onclick="resetAnalysis()" class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition">
                        <i class="fas fa-camera mr-2"></i>
                        <span data-i18n="medicalLens.scanAgain">ë‹¤ì‹œ ì´¬ì˜</span>
                    </button>
                </div>
            </div>

            <!-- Info Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">
                <div class="bg-blue-50 rounded-xl p-6 text-center">
                    <div class="text-4xl mb-3">ğŸ“¸</div>
                    <h4 class="font-bold text-lg mb-2" data-i18n="medicalLens.info1Title">ê°„í¸í•œ ì´¬ì˜</h4>
                    <p class="text-sm text-gray-600" data-i18n="medicalLens.info1Text">ì•½ì œ ë¼ë²¨ì„ ì´¬ì˜í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤</p>
                </div>
                <div class="bg-purple-50 rounded-xl p-6 text-center">
                    <div class="text-4xl mb-3">ğŸ¤–</div>
                    <h4 class="font-bold text-lg mb-2" data-i18n="medicalLens.info2Title">AI ìë™ ë¶„ì„</h4>
                    <p class="text-sm text-gray-600" data-i18n="medicalLens.info2Text">ì•½ ì´ë¦„, ì„±ë¶„, íš¨ëŠ¥ì„ ìë™ ì¸ì‹í•©ë‹ˆë‹¤</p>
                </div>
                <div class="bg-green-50 rounded-xl p-6 text-center">
                    <div class="text-4xl mb-3">ğŸ“±</div>
                    <h4 class="font-bold text-lg mb-2" data-i18n="medicalLens.info3Title">ì‹¤ì‹œê°„ ê³µìœ </h4>
                    <p class="text-sm text-gray-600" data-i18n="medicalLens.info3Text">ë³´í˜¸ìì—ê²Œ ì¦‰ì‹œ ì „ì†¡ë©ë‹ˆë‹¤</p>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
            <footer class="bg-gray-900 text-white py-12 mt-16">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 mb-8 max-w-4xl mx-auto">
            <!-- í”Œë«í¼ ê°œë°œ ë¬¸ì˜ -->
            <div>
                <h3 class="text-xl font-bold mb-4">ğŸ’¼ í”Œë«í¼ ê°œë°œ ë¬¸ì˜</h3>
                <p class="text-gray-400 mb-4 text-sm">QRì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì—¬ ë¬¸ì˜í•˜ì„¸ìš”</p>
                <div class="flex gap-4 mb-4 justify-center md:justify-start">
                    <!-- ìœ„ì±— QR -->
                    <div class="text-center">
                        <img src="images/wechat-qr.jpg" alt="WeChat QR Code" class="w-24 h-24 bg-white p-2 rounded-lg mb-2">
                        <p class="text-xs text-gray-400">WeChat</p>
                    </div>
                    <!-- í…”ë ˆê·¸ë¨ QR -->
                    <div class="text-center">
                        <img src="images/telegram-qr.jpg" alt="Telegram QR Code" class="w-24 h-24 bg-white p-2 rounded-lg mb-2">
                        <p class="text-xs text-gray-400">Telegram</p>
                    </div>
                </div>
                <!-- ê°œë°œì ì´ë©”ì¼ -->
                <div class="flex items-center gap-2 text-gray-400 hover:text-white transition justify-center md:justify-start">
                    <i class="fas fa-envelope-open-text text-xl text-blue-400"></i>
                    <div>
                        <p class="text-xs text-gray-500">ê°œë°œì ë¬¸ì˜</p>
                        <a href="mailto:locks88@naver.com" class="text-sm hover:text-blue-400 transition">locks88@naver.com</a>
                    </div>
                </div>
            </div>
            
            <!-- ë¹ ë¥¸ ë§í¬ -->
            <div>
                <h3 class="text-xl font-bold mb-4">âš¡ ë¹ ë¥¸ ë§í¬</h3>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="disease-info.html" class="hover:text-white transition">ë‡Œì§ˆí™˜ ì •ë³´</a></li>
                    <li><a href="hospital.html" class="hover:text-white transition">ë³‘ì› ê²€ìƒ‰</a></li>
                    <li><a href="care-diary.html" class="hover:text-white transition">ê°„ë³‘ì¼ê¸°</a></li>
                    <li><a href="support.html" class="hover:text-white transition">ì§€ì›ì •ì±…</a></li>
                    <li><a href="community.html" class="hover:text-white transition">ì»¤ë®¤ë‹ˆí‹°</a></li>
                    <li><a href="emergency.html" class="hover:text-white text-red-400 transition">ì‘ê¸‰ì •ë³´</a></li>
                </ul>
            </div>
        </div>
        
        <!-- ì €ì‘ê¶Œ -->
        <div class="border-t border-gray-800 pt-8 text-center text-gray-500">
            <p>&copy; 2025 CASHiQ.org - ë‡Œì§ˆí™˜ì¼€ì–´. All rights reserved.</p>
            <p class="text-sm mt-2">ë³¸ ì‚¬ì´íŠ¸ì˜ ì •ë³´ëŠ” ì°¸ê³ ìš©ì´ë©°, ì „ë¬¸ì˜ì™€ ìƒë‹´ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
        </div>
    </div>
</footer>

    <!-- Scripts -->
    <script src="js/i18n.js"></script>
    <script src="js/main.js"></script>
    <script>
        let videoStream = null;
        let capturedImageData = null;
        let analysisData = null;

        // Start Camera
        async function startCamera() {
            try {
                videoStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' },
                    audio: false 
                });
                
                const video = document.getElementById('cameraVideo');
                video.srcObject = videoStream;
                
                document.getElementById('startCameraBtn').style.display = 'none';
                document.getElementById('cameraControls').style.display = 'block';
                document.getElementById('scanLine').style.display = 'block';
                
                updateStep(1);
            } catch (error) {
                console.error('ì¹´ë©”ë¼ ì ‘ê·¼ ì˜¤ë¥˜:', error);
                let errorMessage = 'ì¹´ë©”ë¼ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.\n\n';
                
                if (error.name === 'NotAllowedError') {
                    errorMessage += 'ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.\në¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì¹´ë©”ë¼ ì ‘ê·¼ì„ í—ˆìš©í•˜ì‹  í›„ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.';
                } else if (error.name === 'NotFoundError') {
                    errorMessage += 'ì¹´ë©”ë¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nê¸°ê¸°ì— ì¹´ë©”ë¼ê°€ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.';
                } else if (error.name === 'NotReadableError') {
                    errorMessage += 'ì¹´ë©”ë¼ê°€ ë‹¤ë¥¸ ì•±ì—ì„œ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤.\në‹¤ë¥¸ ì•±ì„ ì¢…ë£Œí•˜ì‹  í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                } else if (error.name === 'OverconstrainedError') {
                    errorMessage += 'ìš”ì²­í•œ ì¹´ë©”ë¼ ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                } else {
                    errorMessage += 'ì˜¤ë¥˜: ' + error.message;
                }
                
                alert(errorMessage);
            }
        }

        // Stop Camera
        function stopCamera() {
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
            }
            
            const video = document.getElementById('cameraVideo');
            video.srcObject = null;
            
            document.getElementById('startCameraBtn').style.display = 'block';
            document.getElementById('cameraControls').style.display = 'none';
            document.getElementById('scanLine').style.display = 'none';
        }

        // Capture Photo
        function capturePhoto() {
            const video = document.getElementById('cameraVideo');
            const canvas = document.getElementById('captureCanvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            ctx.drawImage(video, 0, 0);
            
            capturedImageData = canvas.toDataURL('image/jpeg');
            
            stopCamera();
            analyzeImage(capturedImageData);
        }

        // Handle File Upload
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    capturedImageData = e.target.result;
                    analyzeImage(capturedImageData);
                };
                reader.readAsDataURL(file);
            }
        }

        // Analyze Image with AI
        async function analyzeImage(imageData) {
            document.getElementById('cameraSection').style.display = 'none';
            document.getElementById('analysisSection').style.display = 'block';
            document.getElementById('capturedImage').src = imageData;
            document.getElementById('analysisLoading').style.display = 'block';
            document.getElementById('analysisResults').style.display = 'none';
            
            updateStep(2);
            
            // ì‹¤ì œ êµ¬í˜„: OCR + AI ë¶„ì„ API í˜¸ì¶œ
            // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                // ìƒ˜í”Œ ë¶„ì„ ê²°ê³¼
                analysisData = {
                    name: 'ë…¸ë¥´ì—í”¼ë„¤í”„ë¦° ì£¼ì‚¬',
                    type: 'ì£¼ì‚¬ì œ',
                    ingredient: 'ë…¸ë¥´ì—í”¼ë„¤í”„ë¦° 4mg/4mL',
                    efficacy: 'ì €í˜ˆì•• ì¹˜ë£Œì œë¡œ, í˜ˆì••ì„ ë†’ì´ê³  ì‹¬ì¥ ë°•ë™ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤. ê¸‰ì„± ì €í˜ˆì••, ì‡¼í¬ ìƒíƒœ, ì‹¬ì •ì§€ ì‹œ ì‚¬ìš©ë©ë‹ˆë‹¤.',
                    reason: 'ë‡Œì¡¸ì¤‘ í™˜ìì˜ ê²½ìš° í˜ˆì••ì´ ê¸‰ê²©íˆ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ ë‡Œë¡œ ê°€ëŠ” í˜ˆë¥˜ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì ì ˆí•œ í˜ˆì•• ìœ ì§€ê°€ ë‡Œ íšŒë³µì— ì¤‘ìš”í•©ë‹ˆë‹¤.',
                    sideEffects: 'ë‘í†µ, ë¶ˆì•ˆê°, ë–¨ë¦¼, ë¹ˆë§¥, ë¶€ì •ë§¥ì´ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ì‚¬ ë¶€ìœ„ ê´´ì‚¬ ê°€ëŠ¥ì„±ì´ ìˆì–´ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
                    contraindications: 'ì‹¬í•œ ê³ í˜ˆì••, ê°‘ìƒì„  ê¸°ëŠ¥ í•­ì§„ì¦, ë‹¹ë‡¨ë³‘ í™˜ìëŠ” ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì„ì‚°ë¶€ëŠ” ì˜ì‚¬ì™€ ìƒë‹´ í›„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.'
                };
                
                displayAnalysisResults(analysisData);
            }, 3000);
        }

        // Display Analysis Results
        function displayAnalysisResults(data) {
            document.getElementById('analysisLoading').style.display = 'none';
            document.getElementById('analysisResults').style.display = 'block';
            
            document.getElementById('medicineName').textContent = data.name;
            document.getElementById('medicineType').textContent = data.type;
            document.getElementById('medicineIngredient').textContent = data.ingredient;
            document.getElementById('medicineEfficacy').textContent = data.efficacy;
            document.getElementById('medicineReason').textContent = data.reason;
            document.getElementById('medicineSideEffects').textContent = data.sideEffects;
            document.getElementById('medicineContraindications').textContent = data.contraindications;
        }

        // Save to Diary
        function saveToDiary() {
            updateStep(3);
            
            // localStorageì— ì €ì¥
            const diaryEntry = {
                id: Date.now(),
                type: 'medication_analysis',
                date: new Date().toISOString(),
                image: capturedImageData,
                data: analysisData
            };
            
            const diaries = JSON.parse(localStorage.getItem('care_diaries') || '[]');
            diaries.push(diaryEntry);
            localStorage.setItem('care_diaries', JSON.stringify(diaries));
            
            // ë³´í˜¸ì ì „ì†¡
            sendToGuardian();
        }

        // Send to Guardian
        function sendToGuardian() {
            updateStep(4);
            
            // ì‹¤ì œ êµ¬í˜„: SMS/ì¹´ì¹´ì˜¤í†¡/í…”ë ˆê·¸ë¨ API í˜¸ì¶œ
            console.log('ë³´í˜¸ìì—ê²Œ ì „ì†¡:', analysisData);
            
            setTimeout(() => {
                document.getElementById('analysisSection').style.display = 'none';
                document.getElementById('successSection').style.display = 'block';
            }, 1000);
        }

        // Reset Analysis
        function resetAnalysis() {
            document.getElementById('cameraSection').style.display = 'block';
            document.getElementById('analysisSection').style.display = 'none';
            document.getElementById('successSection').style.display = 'none';
            
            capturedImageData = null;
            analysisData = null;
            
            updateStep(1);
        }

        // View Diary
        function viewDiary() {
            window.location.href = 'care-diary.html';
        }

        // Update Progress Step
        function updateStep(stepNumber) {
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`step${i}`);
                step.classList.remove('active', 'completed');
                
                if (i < stepNumber) {
                    step.classList.add('completed');
                } else if (i === stepNumber) {
                    step.classList.add('active');
                }
            }
        }
    </script>
</body>
</html>
